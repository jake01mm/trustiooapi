# æ•°æ®åº“å·¥å…·ç›®å½•

è¿™ä¸ªç›®å½•åŒ…å«äº† Trusioo API çš„æ•°æ®åº“ç®¡ç†å·¥å…·ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
db/
â”œâ”€â”€ README.md           # æœ¬è¯´æ˜æ–‡ä»¶
â”œâ”€â”€ migrate_new.go      # ä¸»è¿ç§»å·¥å…·ï¼ˆæ¨èä½¿ç”¨ï¼‰
â”œâ”€â”€ status.go          # è¿ç§»çŠ¶æ€æ£€æŸ¥
â”œâ”€â”€ init.go            # è¿ç§»ç³»ç»Ÿåˆå§‹åŒ–
â”œâ”€â”€ backup.go          # æ•°æ®åº“å¤‡ä»½å’Œæ¢å¤
â””â”€â”€ legacy/            # ä¼ ç»Ÿå·¥å…·ï¼ˆå‘åå…¼å®¹ï¼‰
    â”œâ”€â”€ migrate/       # æ—§è¿ç§»å·¥å…·
    â”œâ”€â”€ alter/         # è¡¨ç»“æ„ä¿®æ”¹
    â”œâ”€â”€ test/          # è¿æ¥æµ‹è¯•
    â””â”€â”€ verify/        # ç»“æ„éªŒè¯
```

## ğŸš€ æ¨èä½¿ç”¨ï¼ˆæ–°å·¥å…·ï¼‰

### ä¸»è¦å·¥å…·

| æ–‡ä»¶ | ç”¨é€” | å‘½ä»¤ |
|------|------|------|
| `migrate_new.go` | ä¸»è¿ç§»å·¥å…· | `make db-migrate` |
| `status.go` | çŠ¶æ€æ£€æŸ¥ | `make db-status` |
| `init.go` | ç³»ç»Ÿåˆå§‹åŒ– | `make db-init` |
| `backup.go` | å¤‡ä»½æ¢å¤ | `make db-backup` |

### ç‰¹æ€§

- âœ… **ç‰ˆæœ¬åŒ–ç®¡ç†** - è‡ªåŠ¨è¿½è¸ªè¿ç§»ç‰ˆæœ¬
- âœ… **å›æ»šæ”¯æŒ** - å®‰å…¨çš„è¿ç§»å›æ»š
- âœ… **çŠ¶æ€è¿½è¸ª** - æ¸…æ™°çš„è¿ç§»çŠ¶æ€æ˜¾ç¤º
- âœ… **å®‰å…¨æœºåˆ¶** - å¤‡ä»½ã€ç¡®è®¤æç¤º
- âœ… **å›¢é˜Ÿåä½œ** - é˜²æ­¢è¿ç§»å†²çª

## ğŸ”§ ä¼ ç»Ÿå·¥å…·ï¼ˆlegacy/ï¼‰

ä¸ºäº†å‘åå…¼å®¹ä¿ç•™çš„å·¥å…·ï¼š

| ç›®å½• | ç”¨é€” | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| `migrate/` | æ—§è¿ç§»ç³»ç»Ÿ | ç´§æ€¥æƒ…å†µæˆ–ç‰¹æ®Šéœ€æ±‚ |
| `alter/` | è¡¨ç»“æ„ä¿®æ”¹ | å•ä¸ªè¡¨çš„å¿«é€Ÿä¿®æ”¹ |
| `test/` | è¿æ¥æµ‹è¯• | è¯Šæ–­æ•°æ®åº“è¿æ¥é—®é¢˜ |
| `verify/` | ç»“æ„éªŒè¯ | éªŒè¯è¡¨ç»“æ„å®Œæ•´æ€§ |

## ğŸ“‹ ä½¿ç”¨å»ºè®®

### æ—¥å¸¸å¼€å‘ï¼ˆæ¨èï¼‰

```bash
# ä½¿ç”¨æ–°çš„è¿ç§»ç³»ç»Ÿ
make db-status        # æ£€æŸ¥çŠ¶æ€
make db-create NAME=feature  # åˆ›å»ºè¿ç§»
make db-migrate       # æ‰§è¡Œè¿ç§»
make db-rollback      # å›æ»šè¿ç§»
```

### ç‰¹æ®Šæƒ…å†µ

```bash
# ä½¿ç”¨ä¼ ç»Ÿå·¥å…·
make db-test          # æµ‹è¯•è¿æ¥
make db-verify        # éªŒè¯ç»“æ„
```

## ğŸ”„ è¿ç§»è·¯å¾„

ä»æ—§ç³»ç»Ÿè¿ç§»åˆ°æ–°ç³»ç»Ÿï¼š

1. **æ£€æŸ¥ç°çŠ¶**: `make db-status`
2. **å¼€å§‹ä½¿ç”¨**: æ–°è¿ç§»ä½¿ç”¨ `make db-create`
3. **é€æ­¥æ›¿æ¢**: æ—§å·¥å…·ä¿ç•™ç”¨äºç´§æ€¥æƒ…å†µ

## ğŸ›¡ï¸ å®‰å…¨æç¤º

- **ç”Ÿäº§ç¯å¢ƒ**: æ‰§è¡Œè¿ç§»å‰å…ˆå¤‡ä»½ `make db-backup`
- **å›¢é˜Ÿåä½œ**: æ‹‰å–ä»£ç åæ£€æŸ¥ `make db-status`
- **æµ‹è¯•ä¼˜å…ˆ**: é‡è¦è¿ç§»å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯

---

ğŸ’¡ **å»ºè®®**: ä¼˜å…ˆä½¿ç”¨æ–°å·¥å…·ï¼Œlegacy å·¥å…·ä»…ç”¨äºå‘åå…¼å®¹æˆ–ç´§æ€¥æƒ…å†µã€‚